{% extends "base.html" %}

{% block title %}Regions{% endblock %}

{% block content %}
<div>
    <a href="{% url 'regions' %}?underdefended=true" class="text-light">Show underdefended only</a>
    <div class="u-flex u-flex-column u-gap-8 mt-1">
        <div class="u-flex u-flex-wrap u-gap-2 card bg-gray-900 p-2">
            {% for my_region in my_regions %}
            {% if my_region.is_underdefended or my_region.plots_available > 0 %}
            {% include "maingame/region_card.html" with region=my_region bordercolor="yellow" ally=True %}
            {% else %}
            {% include "maingame/region_card.html" with region=my_region bordercolor="green" ally=True %}
            {% endif %}
            {% endfor %}
        </div>

        <div class="u-flex u-flex-column u-gap-4">
            {% for opponents_regions_data in opponents_regions_data_list %}
            <div class="card bg-gray-900 p-2">
                <span>{{ opponents_regions_data.ruler }}</span>
                <div class="u-flex u-flex-wrap u-gap-2 mt-2">
                    {% for their_region in opponents_regions_data.regions %}
                    {% include "maingame/region_card.html" with region=their_region bordercolor="red" enemy=True %}
                    {% endfor %}
                </div>
            </div>
            {% endfor %}
            <div class="card bg-gray-900 p-2">
                <span>Unoccupied regions</span>
                <div class="u-flex u-flex-wrap u-gap-2 mt-2">
                    {% for unoccupied_region in unoccupied_regions.regions %}
                    {% include "maingame/region_card.html" with region=unoccupied_region bordercolor="yellow" enemy=True %}
                    {% endfor %}
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}