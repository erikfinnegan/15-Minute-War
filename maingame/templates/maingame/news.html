{% extends "base.html" %}
{% load extra_tags %}
{% load tz %}

{% block title %}News{% endblock %}

{% block content %}
<div class="">
    {% if active_user_settings.show_tutorials %}
        <p>
            Shows significant events in the round, primarily invasions and dominions signing up.
        </p>
    {% endif %}
    <table class="table striped max-w-md">
        <tbody>
            {% for event in displayed_events %}
            <tr class="{% if event.involves_dominion %}text-yellow-300{% endif %}">
                {% if active_user_settings.use_am_pm %}
                <th class="u-align-middle">{{ event.event.timestamp|timezone:active_user_settings.timezone|date:"F j, g:i:s a" }}</th>
                {% else %}
                <th class="u-align-middle">{{ event.event.timestamp|timezone:active_user_settings.timezone|date:"F j, G:i:s" }}</th>
                {% endif %}
                <th class="u-align-middle">{{ event.event.category }}</th>
                <th class="u-align-middle">{{ event.event }}</th>
                <th class="u-align-middle">
                    {% if event.event.reference_type == "battle" %}
                    <a href="{% url 'battle_report' event.event.reference_id %}">
                        <button class="py-0">Info</button>
                    </a>
                    {% else %}
                    {{ event.event.extra_text }}
                    {% endif %}
                </th>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>

{% endblock %}
